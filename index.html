<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fakahoot Quiz - Let's Play! ğŸ‰</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="quiz-container">
        <div class="header">
            <h1 class="title">ğŸ¯ Fakahoot Quiz ğŸ¯</h1>
            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress-fill" id="progressFill"></div>
                </div>
                <div class="progress-text" id="progressText">0 / 0</div>
            </div>
        </div>

        <div class="quiz-content" id="quizContent">
            <div class="nickname-screen" id="nicknameScreen">
                <h2 class="nickname-title">Enter Your Nickname ğŸ®</h2>
                <input type="text" id="nicknameInput" class="nickname-input" placeholder="Type your nickname here..." maxlength="20">
                <button class="nickname-submit-btn" id="nicknameSubmitBtn">Start Quiz! ğŸš€</button>
            </div>
            <div class="start-screen" id="startScreen" style="display: none;">
                <div class="loading-container" id="loadingContainer">
                    <div class="loading-bar-container">
                        <div class="loading-bar-fill" id="loadingBarFill"></div>
                    </div>
                    <div class="loading-text">Preparing your quiz... ğŸ¨</div>
                </div>
                <button class="start-btn" id="startBtn" style="display: none;">Click to Start! ğŸš€</button>
            </div>
        </div>

        <div class="celebration" id="celebration">
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="confetti"></div>
            <div class="celebration-text">ğŸ‰ Correct! ğŸ‰</div>
        </div>

        <div class="battle-animation" id="battleAnimation" style="display: none;">
            <div class="sunrise-container">
                <div class="sun"></div>
                <div class="sunrise-text">The Final Battle Begins...</div>
            </div>
            <div class="battle-field">
                <div class="unicorn-army" id="unicornArmy"></div>
                <div class="poop-army" id="poopArmy"></div>
            </div>
            <div class="victory-winner" id="victoryWinner" style="display: none;">
                <div class="winner-emoji" id="winnerEmoji"></div>
                <div class="winner-text" id="winnerText"></div>
            </div>
            <button class="next-to-results-btn" id="nextToResultsBtn" onclick="showResults()" style="display: none;">View Results â†’</button>
        </div>

        <div class="results" id="results" style="display: none;">
            <h2>Quiz Complete! ğŸŠ</h2>
            <div class="score-display" id="scoreDisplay"></div>
            <button class="download-btn" id="downloadBtn" onclick="downloadResults()">Download Results ğŸ“¥</button>
        </div>
    </div>


    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-analytics.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";
      
        // Your web app's Firebase configuration
        const firebaseConfig = {
          apiKey: "AIzaSyDbsC2-JAVaMPJ1P5MXUzGNFocO1ckYW1s",
          authDomain: "enkis-fakahoot.firebaseapp.com",
          projectId: "enkis-fakahoot",
          storageBucket: "enkis-fakahoot.firebasestorage.app",
          messagingSenderId: "472090260372",
          appId: "1:472090260372:web:3970ed2ce2e8274752d581",
          measurementId: "G-Q0E9HS1551"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = getFirestore(app);
        
        console.log('ğŸ”¥ Firebase initialized successfully');
        console.log('ğŸ“Š Firestore database:', db);
        console.log('ğŸ”‘ Project ID:', firebaseConfig.projectId);
        
        // Make Firebase functions available globally
        window.firebaseDB = db;
        window.firebaseAddDoc = addDoc;
        window.firebaseCollection = collection;
        
        // Test function to verify Firebase connectivity
        window.testFirebase = async function() {
            console.log('ğŸ§ª Testing Firebase connection...');
            try {
                const testData = {
                    test: true,
                    timestamp: new Date(),
                    message: 'Test connection'
                };
                const docRef = await addDoc(collection(db, 'quizAnswers'), testData);
                console.log('âœ… Firebase test successful! Document ID:', docRef.id);
                return true;
            } catch (error) {
                console.error('âŒ Firebase test failed:', error);
                console.error('Error code:', error.code);
                console.error('Error message:', error.message);
                return false;
            }
        };
        
        console.log('ğŸ’¡ To test Firebase, run: testFirebase() in the console');
      </script>
    <script src="script.js"></script>
</body>
</html>

